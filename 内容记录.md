# 2.5 函数的定义和调用
## 1.函数的定义
语法：def 函数名（参数1,2,3.....）

    return（可加可不加）
   ## 2.函数的调用
     函数名（参数）
  # 2.6异常处理
  大致情况：当代码出现错误的时候，可以用 try...except...finally语句，
  
      try:
          一个错误的语句
      except 错误的方式 as e:
          执行行1
          执行行2
      finally :
          执行行3
    程序会按着这个方式执行下去

# 2.7 匿名函数
## 1.定义：不使用单独的定义语句进行定义的函数
## 2.使用，Python里使用 lambda关键字
  下面对其进行演示
  lambda 输入元素 ： 返回值

# 2.8 模块
## 1.模块的使用
函数的导入形式：
import 模块名 as 别名 ，之后就可以使用别名进行该模块的操作了
## 2. 常用模块简介及使用实例
### 1. math模块
 math.ceil()——向上取整 math.floor()————向下取整    math.fabs()————求绝对值  math.exp(x) ————返回e的x次方 math. log(x,base) 返回 log（x）/log(base) 
 math.pow(x,y)————返回x的y次方   math.sqrt(x)————返回x的平方根   后有三角函数等 不再赘述，具体使用方式由于过于简单，不做过多介绍
### 2.time模块 
time模块是一个用来处理时间的一个内建模块

### 3.random模块
#### 1.定义：用于生成随机数的一个模块 
#### 2.常用函数 

random.random()————生成0-1之间均匀分布的随机浮点数
random.normalvariate(0,1) ————生成1个符合均值为0，方差为1的正态分布的随机数
之后再进行补充

### 4.nunpy简介（较为重点）
#### 注：这里不讨论安装，只讨论用法
#### 1.概念
numpy提供了高性能的数学工具，是大数据处理的基本，主要面向的是齐次多维数组，一般是二维。加快了使用python处理数据的次数，因为该模板底层使用c++进行编码
具体官网见https://numpy.org/

理解一些关键概念：
a=np.array([[1., 0., 0.],
[0., 1., 2.]] )这是一个（2,3）的二维数组，因为是两行三列
#### 1.通过一些函数获取相关的信息
 a.ndim()————获取这个数组的维数，因为是两行三列的二维数组，所以输出了2维 
 a.shape()————获取这个数组的形式，因为两行三列，所以是(2,3)
 a.size()—— 获取这个数组的元素个数，为2*3=6
 >一个例子
import numpy as np
a = np.arange(15).reshape(3, 5)
a
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])
a.shape
(3, 5)
a.ndim
2
a.dtype.name
'int64'
a.itemsize
8
a.size
15
type(a)
<class 'numpy.ndarray'>
b = np.array([6, 7, 8])
b
array([6, 7, 8])
type(b)
<class 'numpy.ndarray'>
 #### 2.获取数组的存储信息
 a[0,1]————获取第一行第二列的数字
 在这里可以使用切片的方法，不再过多介绍了
 可以通过逻辑运算符筛选出需要的元素
 #### 3.数组的基本运算
 ##### 矩阵运算，大部分处理的其实是矩阵
 ###### 1.两个相同尺寸的数组，可以进行直接的四则运算，是在同位置进行加减乘除
 a=数组1
 b=数组2
 可以直接使用a+b
 ###### 2. dot(a,b)，将两个数组进行点乘运算
 ###### 3. @会进行矩阵的乘法运算
      4. a=np.mat(a)————转换为矩阵 a.I————逆矩阵    a.T————矩阵的转置    a.trace————矩阵的迹
      np.linalg.det(a)————矩阵a的行列式 np.linalg.norm(a,ord=None) 矩阵a的范数

#### 4.随机数生成
 不过多介绍
 ####  5.其他内置函数
 max————返回数组中最大的数 min同理 
 argmin()与argmax()是返回索引 
 sum()————返回所有数据的总和
 mean()————返回平均值
 median()————返回中位数
 var（）————返回方差
 std（）————返回标准差
 
### pandas简介
#### 1.基本操作
##### 1.用字典生成表格
exmp： 字典a 
语法：workout=pd.DataFrame(a)
  display(workout) 这样一个表格就生成了
  ##### 2.可以使用workout.index/columns 来访问索引
   与此同时，也可以通过直接赋值来改变索引
   workout.index=[]，输入一个列表即可
   也可以单独使用index来单独指定行的索引
  
可以直接访问一行 workout['calories']
.loc————根据索引选择数据 .loc['day',:]
.iloc————根据位置选择数据 iloc[0,:]
#### 其他操作
##### 1.从外部输入数据 pd.read_csv(具体文件路径)
.head()————查看前面n行 
.tail()————查看后面n行
.sample()————任意返回n行数据

.describe()————来描述数据类型的分布
.info()————看列的类型与数值
.dtypes()————每一列的类型
.unique()————访问一个序列中出现过的所有值————可以加一个键
.groupby()————根据列的值分类，对每个类型集计信息
.agg()————返回很多统计性的信息
##### 1.serious 的多个属性 1. name 2. values 3. index

#### 常用的工作流程
##### 1.字符串的处理
###### 1. 各种str函数
1.lower ————全部小写
2.upper——————全部大写
3.len()————求长度
4.strip()————去除前后空格
5.replace('A','B')————用B替代A
6.split()————分割字符串
##### 2.时间信息的处理
###### 1.输入一个含有时间的数据集
###### 2. 使用.to_datetime()进行转化
1..plot.hist()————对数据的可视化展示
##### 3.split-apply-combine
先使用.groupby()，再使用apply()先对信息分类，再根据每一类进行函数的处理

##### 3.对表格的排序
.sort_values():按值排序
.rank():按照列的值排序返回信息
.sort_index():按照索引值的大小进行排列————使用索引恢复原始顺序
##### 4.对表格的拼接
1.concat()————横向，纵向的表格拼接
2.join（）————在索引上进行拼接
3.merge（）————在指定的merge上进行拼接
##### 5.长表格转化为宽表格
.pivot



### matplotlib简介
#### 1.绘图类型简介
1.plot 正常折线图
2.scatter————散点图
#### 2.seaborn简介
可以使用很简单的语句绘制图像

### scikit——learn简介 
1.是一个机器学习的模块，内置了各种算法和参数可供调节
### tensorflow 简介
可以借助底层借口实现高度定制化的机器学习模型构建 可以在CPU和GPU上同时运行 极大提升运算速度

# 数据预处理 
## 缺失值检查 
缺失值可能丢失了大量的有用信息 可能会使数据分析过程陷入混乱 
### 缺失值处理 
#### 删除
若大部分有效数据确实了 ，且有时候不能进行插补

具体操作，使用dropna函数，执行删除的操作，但一行或列中有一个缺失值，就会删除一整行

#### 插补法 
使用函数 fillna()
1.插补一个均值fillna(mean())
2.插补一个固定值　使用fillna(a)
将缺失的属性值用一个常量替换

3.用最近邻插补 fillna(method='pad'/'bfill' bfill是指用下一行的数据进行填充 ffill，就是用上一个非缺失值填空，需要考虑第一行及最后一行这种特殊位置

4.插值法（一般都会使用插值法）
利用函数在某区间中已知的若干点的函数值，拟合出适当的函数

##### 1.拉格朗日插值法
 求已知的过n个点的n-1次多项式，将给的n个点一个一个带入，求出参数值
 具体使用范例：
 from scipy.interpolate import lagrange 
 取出插值为止前后k个数据
 提出空值
 return lagrange
 
 通过操作读取需要更改的那部分，然后再进行具体操作
 1.用ilog切片选择出自己想要处理的部分
 
 ##### 2. 牛顿插值法
 可以克服插值节点的增减造成的差值多项式的变化
 
 ## 异常值处理 
 异常值是指录入错误或者不合常理的数据，明显偏离合理的范围
 
 ### 异常值的检查方法
 1.基础统计量分析，常用：最大值和最小值，如果有个人500岁，那肯定异常 describe（），可以看出数据是否有异常
 2.正态分布的原则
 3.箱形图分析 识别结果比较客观  boxplot
 4.一致性分析
 
 ### 常用处理方法
 1.删除异常值
 2.将异常值当成缺失值
 3.不管
 
 ## 数据标准化处理
 目的：消除不同类型数据间的量纲与取值范围的差异，将其锁房至一个有利于之后数据处理的数据范围
 ### 具体的方式
 1.最小-最大标准化
 x新=x-min/max-min
 通过preprocessing.MinMaxScaler()进行实现
 问题：如果数据集中且某数字很大，就不太行
 
 2.零均值标准化（使用最多的方法）
 处理后数据均值为0，标准差为1
 x新=x-均值/标准差
 可以通过 preprocessing.StandardScaler()函数实现
 3.小数定标标准化
 将属性值投射在[-1,1]之间
 
## 时空数据分析基础
 时间性数据
共有两个应用场景：1.时间戳，记录某个特定时刻2.时间间隔，观测到的小时交通流量

空间型数据： 用点线面等基本空间数据结构表示

### 空间坐标系转换
常见的坐标系：WGS-84（国际上经纬度） GCJ-02（对经纬度进行单词和多次非线性偏移） BD-09（对经纬度进行单词和多次非线性偏移） UTM坐标系（平面直角坐标系）
有具体的数字进行切换

1.先定义坐标转换
wgs84=osr.SpatialReference
wgs84.ImportFromEPSG(4326)

下一个省略
2.利用CoordinateTransformation(a坐标系，b坐标系）


### 时空单元划分
发掘数据中隐藏的时空特征，另一类便于不同类别的时空数据进行融合

具体操作：
1.定义一个时间窗长度
2.生成时间窗索引
df['time_id]

### 时空特征提取
1.计算出每个单位的个体特征
2.个体特征集计

### 探索性数据分析




## 大数据可视化的python实践
### matplotlib设置
#### 图表元素设置
1.设置坐标轴

import matplotlib.pyplot as plt

fig=plt.figure(figsize=(长，宽))
plt.axis([xmin,xmax,ymin,ymax])

2。具体设置刻度，xmajorLocator=MultipleLocator(刻度数)
ax.xaxis.set_major_locator(xxmajorLocator)#真正设置刻度的语句

设置保留位数 ax.xaxis.set_major_formatter(FormatStrFormatter('%,1f')#保留一位小数

3.具体作图内容
x=range(10)
y=[i的2次方 for i in x]
plt.plot(x,y) #真正的绘图

4.设置边界
ax.set_xlim(left,right)
ax.set_ylim(bottom,top(可以没有))

###简单的画图

plt.xticks([0.0,20.0,40.0,60.0,80.0])#就可以当做坐标轴的设置


5.搞一个次轴
在标注上使用汉字：
plt.Params['font.sans-serif']='SimHei' # SimHei是黑体，只有输入了才可以输入汉字
显示负号：
plt.Params['axes.unicode_minus']=False

1.首先：

在显示次轴的时候，可以设定两个y，共用同一个x即可，
设置轴的名字：
ax1_set_xlabel('主轴')

核心到左：对
ax2=ax1.twinx()，然后就可以对ax2进行设置，就当成ax1一样正常设置即可

#### 网格设置






